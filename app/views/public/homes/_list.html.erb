<% if notes %>
  <div class="scroll-container border" style: "width: 190px;">
    <% notes.each do |note| %>
      <%= link_to note_path(note), style: "color: black; width: 100%;" do %>
        <div class="border px-1 pb-1" style="width: 100%; height: 80px">
          <div class="text-right">
            <font size="2">
              <div class="d-inline-block px-1"><b># <%= note.prefecture %></b></div>
              <div class="d-inline-block px-1"><b># <%= note.city %></b></div>
            </font><br>
          </div>
          <b class="ml-1"><%= note.title %></b><br>
          <div class="tag-container">
            <font size="2">
              <% note.tags.each do |tag| %>
                <div class="d-inline-block pr-1"># <%= tag.name %></div>
              <% end %>
            </font>
          </div>
          <!--<i class="fa-regular fa-message"></i> クリックすると、マップのマーカーウィンドウがポップする-->
        </div>
      <% end %>
    <% end %>
  </div>
<% else %>
  <div class="d-flex justify-content-center align-items-center border p-1" style="width: 190px;height: 60px">投稿はありません</div>
<% end %>

<script>
  // タグコンテナ内のタグ要素を取得
  const tagContainer = document.querySelector('.tag-container');
  const tags = tagContainer.querySelectorAll('.tag');

  // タグ要素の幅を確認して省略表示
  let totalWidth = 0;
  tags.forEach(tag => {
    totalWidth += tag.offsetWidth;
  });

  if (totalWidth > tagContainer.offsetWidth) {
    tagContainer.classList.add('ellipsis');
  }
</script>